<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vendor Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/vendor.css') }}">
  <link rel="stylesheet" href="/static/styles/admin.css">
</head>
<body>
  <!-- Header Section -->
  <header class="header">
    <h1>Vendor Dashboard</h1>
    <p>Manage your services and bookings efficiently</p>
  </header>

  <!-- Metrics Section -->
  <main>
    <div class="metrics">
      <div class="metric-card">
        <h5>Total Services</h5>
        <h3>{{ total_services }}</h3>
      </div>
      <div class="metric-card">
        <h5>Booked Services</h5>
        <h3>{{ booked_services }}</h3>
      </div>
      <div class="metric-card">
        <h5>Total Bookings</h5>
        <h3>{{ total_bookings }}</h3>
      </div>
      <div class="metric-card">
        <h5>Available Venues</h5>
        <h3>{{ available_venues }}</h3>
      </div>
      <div class="metric-card">
        <h5>Booked Venues</h5>
        <h3>{{ booked_venues }}</h3>
      </div>
    </div>

    <!-- Manage Services Button -->
    <div class="actions">
      <button class="btn" onclick="openModal('manageServicesModal')">Manage Services</button>
    </div>
  </main>

  <!-- Manage Services Modal -->
  <div class="modal" id="manageServicesModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('manageServicesModal')">&times;</span>
      <h2>Manage Services</h2>

      <!-- Tab Navigation -->
      <div class="tab-container">
        <button class="tab-btn active" onclick="openTab(event, 'locationTab')">Add Location</button>
        <button class="tab-btn" onclick="openTab(event, 'venueTab')">Add Venue</button>
        <button class="tab-btn" onclick="openTab(event, 'serviceTab')">Add Service</button>
        <button class="tab-btn" onclick="openTab(event, 'eventTab')">Add Event</button>
      </div>

      <!-- Tab Content -->
      <!-- Location Tab -->
      <div id="locationTab" class="tab-content active">
        <form method="POST" action="/add_location" onsubmit="handleFormSubmit(event, 'locationTab', 'venueTab', 'manageServicesModal')">
          <h3>Add Location</h3>
          <input type="text" name="address" placeholder="Address" required>
          <input type="text" name="country" placeholder="Country" required>
          <input type="text" name="region" placeholder="Region">
          <input type="text" name="district" placeholder="District">
          <input type="text" name="street_ward" placeholder="Street/Ward">
          <button type="submit" name="submit_location">Submit Location</button>
        </form>
      </div>

      <!-- Venue Tab -->
      <div id="venueTab" class="tab-content">
        <form method="POST" action="/add_venue" onsubmit="handleFormSubmit(event, 'venueTab', 'serviceTab', 'manageServicesModal')">
          <h3>Add Venue</h3>
          <input type="text" name="venue_name" placeholder="Venue Name" required>
          <textarea name="venue_description" placeholder="Description"></textarea>
          <input type="number" name="venue_capacity" placeholder="Capacity" required>
          <input type="number" step="0.01" name="venue_price" placeholder="Price" required>
          <select name="location_id" required>
            <option value="" disabled selected>Select Location</option>
            {% for location in vendor_locations %}
              <option value="{{ location.id }}">{{ location.address }}, {{ location.city }}</option>
            {% endfor %}
          </select>
          <button type="submit" name="submit_venue">Submit Venue</button>
        </form>
      </div>

      <!-- Service Tab -->
      <div id="serviceTab" class="tab-content">
        <form method="POST" action="/add_service" onsubmit="handleFormSubmit(event, 'serviceTab', 'eventTab', 'manageServicesModal')">
          <h3>Add Service</h3>
          <input type="text" name="service_name" placeholder="Service Name" required>
          <textarea name="service_description" placeholder="Description"></textarea>
          <input type="number" step="0.01" name="service_price" placeholder="Price" required>
          <button type="submit" name="submit_service">Submit Service</button>
        </form>
      </div>

      <!-- Event Tab -->
      <div id="eventTab" class="tab-content">
        <form method="POST" action="/add_event" onsubmit="handleFormSubmit(event, 'eventTab', null, 'manageServicesModal')">
          <h3>Add Event</h3>
          <input type="text" name="event_name" placeholder="Event Name" required>
          <textarea name="event_description" placeholder="Description"></textarea>
          <input type="date" name="event_date" required>
          <select name="event_venue_id" required>
            <option value="" disabled selected>Select Venue</option>
            {% for venue in vendor_venues %}
              <option value="{{ venue.id }}">{{ venue.name }}</option>
            {% endfor %}
          </select>
          <select name="event_service_id">
            <option value="" disabled selected>Select Service (Optional)</option>
            {% for service in vendor_services %}
              <option value="{{ service.id }}">{{ service.name }}</option>
            {% endfor %}
          </select>
          <button type="submit" name="submit_event">Submit Event</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Notification Container -->
  <div id="notification" class="notification"></div>

  <!-- Footer Section -->
  <footer class="footer">
    <p>&copy; 2025 EventHub. All rights reserved.</p>
  </footer>

  <!-- JavaScript -->
  <script src="{{ url_for('static', filename='scripts/vendor.js') }}"></script>
</body>
</html>